---
import { getLangFromUrl, getTranslatedPath } from "../i18n/utils";

export interface NavItem {
  key: string;
  label: string;
  href: string;
}

export interface Props {
  items: NavItem[];
}

const { items } = Astro.props;
const currentLang = getLangFromUrl(Astro.url);
const currentPath = Astro.url.pathname;
---

<nav class="text-akcent-modra sm:flex sm:justify-end">
  <ul class="flex flex-row justify-between sm:space-x-5">
    {
      items.map((item) => {
        const isActive =
          currentPath === item.href ||
          currentPath === `/${currentLang}${item.href}` ||
          (item.href === "/" &&
            (currentPath === "/" || currentPath === `/${currentLang}`));

        return (
          <li class="rounded-lg py-1 px-2 text-akcent-modra hover:text-background hover:bg-akcent-modra cursor-pointer">
            <a
              href={getTranslatedPath(item.key, currentLang)}
              class={`nav-link transition-colors duration-200 cursor-pointer ${
                isActive
                  ? "text-primary font-medium border-b-2 border-primary"
                  : ""
              }`}
            >
              {item.label}
            </a>
          </li>
        );
      })
    }
  </ul>
</nav>

